<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLAAK</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700&family=EB+Garamond:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Syne', sans-serif; background-color: #000; color: #fff; text-align: center; }
        .a-enter-vr { display: none !important; }

        /* üî• Fade-In Effect */
        #fade-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 9999;
            opacity: 1;
            transition: opacity 2s ease-out;
        }

        /* üìå Overlay Styling */
        .overlay { 
            position: absolute; 
            top: 40px; 
            left: 40px; 
            z-index: 100;
            width: calc(100% - 80px);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            pointer-events: auto;
            opacity: 0;
            animation: fadeInUI 0.8s ease-out forwards 0.5s;
            gap: 15px; /* ‚úÖ Proper spacing */
        }

        @keyframes fadeInUI {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* üè∑Ô∏è Title Styling */
        .title {
            font-size: 78px;
            font-weight: 700;
            text-transform: uppercase;
            max-width: 100%;
            word-wrap: break-word;
            line-height: 1.1;
            cursor: pointer;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
            text-align: left;
            transition: opacity 0.2s ease-in-out;
        }

        /* ‚úÖ Subtle hover effect */
        .title:hover {
            opacity: 0.70;
        }

        /* üìç Coordinates Styling */
        .coordinates {
            font-size: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 0.5px;
            text-transform: uppercase;
            text-align: left;
        }

        /* üìù Description Styling */
        .description { 
            font-family: 'Cormorant Garamond', serif; 
            font-size: 18px; 
            font-weight: 400; 
            max-width: 600px; 
            margin-top: 0px; 
            line-height: 1.4; 
            word-wrap: break-word;
            opacity: 1; 
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            text-align: left;
            color: rgba(255, 255, 255, 0.7);
        }

        @media (max-width: 810px) {
            .title { font-size: 40px; line-height: 1.05; }
            .coordinates { font-size: 14px; }
            .description { font-size: 16px; }
        }

        /* üé® Brand Colors */
        #brand-colors {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            align-self: flex-end;
            padding-bottom: 20px; /* ‚úÖ Ensures proper spacing */
        }

        .color-box {
            width: 12px;
            height: 12px;
            border-radius: 4px;
            transition: opacity 0.3s ease-in-out;
            display: inline-block;
            margin-right: 8px;
        }

        /* ‚úÖ Remove margin from the last element */
        .color-box:last-child {
            margin-right: 0;
        }

        /* ‚úÖ Hover effect for all boxes */
        @media (hover: hover) {
            #brand-colors:hover .color-box {
                opacity: 0.5;
            }
        }

        .color-green { background-color: #87D156; }
        .color-yellow { background-color: #FFDF4D; }
        .color-orange { background-color: #EF5900; }

    </style>

</head>
<body>

    <!-- üî• Fade-In Effect -->
    <div id="fade-overlay"></div>

    <!-- Overlay Text -->
    <div class="overlay">
        <div id="brand-colors">
            <a href="https://petsq.works" id="brand-colors-link" target="_blank" rel="noopener noreferrer">
                <div class="color-box color-green"></div>
                <div class="color-box color-yellow"></div>
                <div class="color-box color-orange"></div>
            </a>
        </div>
        <h1 class="title" onclick="toggleDescription()">BLAAK TRAIN STATION</h1>
        <p class="coordinates">51.919929¬∞ N, 4.489521¬∞ E</p>
        <p class="description" id="description">A moment frozen in motion‚Äîsubway trains gliding past, neon reflections in steel, the hum of city life echoing underground. Blaak station is where past meets the future, in a loop of silent movement.</p>
    </div>

    <!-- A-Frame Scene -->
    <a-scene 
        device-orientation-permission-ui="enabled: false"
        touch-action="none"
        vr-mode-ui="enabled: false">

        <a-assets>
            <video id="blaakVideo" muted playsinline webkit-playsinline loop crossorigin="anonymous">
                <source src="https://assets.360.petsq.works/rotterdam/rotterdam_blaak.mp4" type="video/mp4">
            </video>
        </a-assets>

        <!-- ‚úÖ FIXED CAMERA SYSTEM -->
        <a-camera id="camera" look-controls wasd-controls="enabled: false"></a-camera>

        <!-- ‚úÖ VIDEO SPHERE WITH SMOOTHER ROTATION -->
        <a-videosphere src="#blaakVideo" rotation="0 180 0"
            animation="property: rotation; to: 0 540 0; loop: true; dur: 50000; easing: linear">
        </a-videosphere>

    </a-scene>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('blaakVideo');
            const fadeOverlay = document.getElementById('fade-overlay');
            const description = document.getElementById('description');
            const title = document.querySelector('.title');
    
            // ‚úÖ Ensure video plays automatically without requiring interaction
            function tryPlay() {
                video.play().then(() => {
                    console.log("‚úÖ Video started playing");
                }).catch(err => {
                    console.log("‚ùå Autoplay blocked, waiting for user action...");
                });
            }
    
            tryPlay(); // ‚úÖ Attempt autoplay on page load
    
            // ‚úÖ Instantly fade out overlay after load
            fadeOverlay.style.opacity = '0';
            fadeOverlay.addEventListener('transitionend', () => {
                fadeOverlay.style.display = 'none';
            });
    
            // ‚úÖ Fix: Ensure First Click on Title Works Immediately
            title.addEventListener('click', (event) => {
                event.stopPropagation(); // ‚úÖ Prevents any unwanted interference
                description.style.opacity = (description.style.opacity === "1" || description.style.opacity === "") ? "0" : "1";
                description.style.visibility = (description.style.opacity === "1") ? "visible" : "hidden";
            });
    
            // ‚úÖ Fix: Prevent A-Frame from Blocking First Clicks
            setTimeout(() => {
                const scene = document.querySelector('a-scene');
                scene.focus(); // ‚úÖ Ensures the scene is interactive immediately
            }, 100);
        });
    </script>

</body>
</html>